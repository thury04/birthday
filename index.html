<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./images/cake128.png" />
    <title>Hoang's Birthday</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div id="initialScreen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #cad2d3; display: flex; justify-content: center; align-items: center; z-index: 9999;">
      <button id="startButton" style="font-size: 20px; padding: 10px 20px;">Bắt đầu</button>
    </div>
    <audio id="birthdaySong" class="song" loop>
      <source src="hbd.mp3" type="audio/mpeg">
    </audio>
    <div id="wrapper">
        </head>
        <body>
        
          <div id="wrapper"><div class="flag__birthday">
        <img src="./images/1.png" alt="" width="350" class="flag__left" />
        <img src="./images/1.png" alt="" width="350" class="flag__right" />
      </div>
      <div class="content">
        <div class="left">
          <div class="title">
            <h1 class="happy">
              <span style="--t: 4s">H</span>
              <span style="--t: 4.2s">a</span>
              <span style="--t: 4.4s">p</span>
              <span style="--t: 4.6s">p</span>
              <span style="--t: 4.8s">
                y
                <div class="hat">
                  <img src="./images/hat.png" alt="" width="130" />
                </div>
              </span>
            </h1>
            <h1 class="birthday">
              <span style="--t: 5s">B</span>
              <span style="--t: 5.2s">i</span>
              <span style="--t: 5.4s">r</span>
              <span style="--t: 5.6s">t</span>
              <span style="--t: 5.8s">h</span>
              <span style="--t: 6s">d</span>
              <span style="--t: 6.2s">a</span>
              <span style="--t: 6.4s">y</span>
            </h1>
          </div>
          <div class="date__of__birth">
            <span></span>
          </div>
          <div class="btn">
            <button id="btn__letter">Nhận thư nè 😘📧</button>
          </div>
        </div>
        <div class="right">
          <div class="box__account">
            <div class="image">
              <img src="./images/IMG.jpg" alt="" />
            </div>
            <div class="name">
              <i class="fa-solid fa-heart"></i>
              <span>Lương Tiến Hoàng</span>
              <i class="fa-solid fa-heart"></i>
            </div>
            <div class="balloon_one">
              <img width="100px" src="./images/balloon1.png" alt="" />
            </div>
            <div class="balloon_two">
              <img width="100px" src="./images/balloon2.png" alt="" />
            </div>
          </div>
          <div class="cricle">
            <div class="text__cricle">
              <span style="--i: 1">h</span>
              <span style="--i: 2">a</span>
              <span style="--i: 3">p</span>
              <span style="--i: 4">p</span>
              <span style="--i: 5">y</span>
              <span style="--i: 6">-</span>
              <span style="--i: 7">b</span>
              <span style="--i: 8">i</span>
              <span style="--i: 9">r</span>
              <span style="--i: 10">t</span>
              <span style="--i: 11">h</span>
              <span style="--i: 12">d</span>
              <span style="--i: 13">a</span>
              <span style="--i: 14">y</span>
              <span style="--i: 15">-</span>
            </div>
            <i class="fa-solid fa-heart"></i>
          </div>
          <span class="day"> </span>
          <span class="month"></span>
        </div>
      </div>
      <div class="decorate_star star1" style="--t: 15s"></div>
      <div class="decorate_star star2" style="--t: 15.2s"></div>
      <div class="decorate_star star3" style="--t: 15.4s"></div>
      <div class="decorate_star star4" style="--t: 15.6s"></div>
      <div class="decorate_star star5" style="--t: 15.8s"></div>
      <div class="decorate_flower--one" style="--t: 15s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_flower--two" style="--t: 15.3s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_flower--three" style="--t: 15.6s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_bottom">
        <img src="./images/decorate.png" alt="" width="100" />
      </div>
      <div class="smiley__icon">
        <img src="./images/smiley_icon.png" alt="" width="100" />
      </div>

      <div class="box__letter">
        <div class="letter__border">
          <div class="letter">
            <div class="title__letter"></div>
            <div class="content__letter">
              <div class="left">
                <img
                  id="heart__letter"
                  src="./images/heart_letter.png"
                  alt=""
                />
                <img
                  class="heart heart_1"
                  style="--t: 0.2s"
                  width="20"
                  src="./images/heart.png"
                  alt=""
                />
                <img
                  class="heart heart_2"
                  style="--t: 0.4s"
                  width="20"
                  src="./images/heart.png"
                  alt=""
                />
                <img
                  class="heart heart_3"
                  style="--t: 0.6s"
                  width="20"
                  src="./images/heart.png"
                  alt=""
                />
                <img
                  class="heart heart_4"
                  style="--t: 0.8s"
                  width="20"
                  src="./images/heart.png"
                  alt=""
                />
              </div>
              <div class="right">
                <div class="love__img">
                  <img src="./images/love.png" alt="" width="220" />
                </div>
                <div class="text__letter">
                  <p></p>
                </div>
                <img id="mewmew" width="80" src="./images/mewmew.gif" alt="" />
                <!-- Add this HTML for the slideshow inside the body tag -->
              <div id="slideshow" class="slideshow">
                  <div class="slideshow-container">
                    <img class="slide" src="./images/slide1.jpg" alt="Slide 1" style="display: none;">
                    <img class="slide" src="./images/slide2.jpg" alt="Slide 2" style="display: none;">
                    <img class="slide" src="./images/slide3.jpg" alt="Slide 3" style="display: none;">
                    <img class="slide" src="./images/slide4.jpg" alt="Slide 4" style="display: none;">
                    <img class="slide" src="./images/slide5.jpg" alt="Slide 5" style="display: none;">
                    <button class="prev" onclick="changeSlide(-1)">&#10094;</button>
                    <button class="next" onclick="changeSlide(1)">&#10095;</button>
                  </div>
                  <!-- Add this button inside your slideshow container -->
                  <button class="close-slideshow">&times;</button>
                </div>
                            </div>
                          </div>
                        </div>
                        <div class="close">
                          <i class="fa-solid fa-xmark"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </body>
                <script>
    document.addEventListener("DOMContentLoaded", function () {
      const audio = document.getElementById("birthdaySong");
      const startButton = document.getElementById("startButton");
      const initialScreen = document.getElementById("initialScreen");

      startButton.addEventListener("click", function () {
        audio.play().then(() => {
          initialScreen.style.display = "none";
          startAnimations();
        }).catch(error => {
          console.log("Playback prevented. Please interact with the document first.");
        });
      });

      function startAnimations() {
        // Place all your existing animation code here
        setTimeout(function () {
          timeDatetxt = setInterval(function () {
            if (currentIndex < charArrDate.length) {
              date__of__birth.textContent += charArrDate[currentIndex];
              currentIndex++;
            } else {
              document.querySelector(".date__of__birth").prepend(i);
              document
                .querySelector(".date__of__birth")
                .appendChild(i.cloneNode(true));
              clearInterval(timeDatetxt);
            }
          }, 100);
        }, 12000);

        // ... rest of your animation code ...
      }
    });
    let datetxt = "24/01/1994";
    let datatxtletter =
      "Hôm nay, ngày 24/01/2025, em chúc chàng trai của em có thật nhiều sức khỏe, luôn gặp may mắn🍀. Chúc anh thành công trên con đường mình chọn. Anh hãy yên tâm làm việc nhé. Em yêu anh💕. Nguyễn Thu Thủy thân gửi ! (chạm vào bé mèo để xem quà của anh nha ^^)";
    let titleLetter = "Gửi anh ";
    let charArrDate = datetxt.split("");
    let charArrDateLetter = datatxtletter.split("");
    let charArrTitle = titleLetter.split("");
    let currentIndex = 0;
    let currentIndexLetter = 0;
    let currentIndexTitle = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    let text__letter = document.querySelector(".text__letter p");

    // ... rest of your existing JavaScript code ...
    setTimeout(function () {
      timeDatetxt = setInterval(function () {
        if (currentIndex < charArrDate.length) {
          date__of__birth.textContent += charArrDate[currentIndex];
          currentIndex++;
        } else {
          let i = document.createElement("i");
          i.className = "fa-solid fa-star";
          document.querySelector(".date__of__birth").prepend(i);
          document
            .querySelector(".date__of__birth")
            .appendChild(i.cloneNode(true));
          clearInterval(timeDatetxt);
        }
      }, 100);
    }, 12000);

    var intervalContent;
    var intervalTitle;
    $("#btn__letter").on("click", function () {
      $(".box__letter").slideDown();
      setTimeout(function () {
        $(".letter__border").slideDown();
      }, 1000);
      setTimeout(function () {
        intervalTitle = setInterval(function () {
          if (currentIndexTitle < charArrTitle.length) {
            document.querySelector(".title__letter").textContent +=
              charArrTitle[currentIndexTitle];
            let i = document.createElement("i");
            i.className = "fa-solid fa-heart";
            document.querySelector(".title__letter").appendChild(i);
            currentIndexTitle++;
          } else {
            clearInterval(intervalTitle);
          }
        }, 100);
      }, 2000);
      setTimeout(function () {
        document.querySelector("#heart__letter").classList.add("animationOp");
        document.querySelector(".love__img").classList.add("animationOp");
        document.querySelector("#mewmew").classList.add("animationOp");
      }, 2800);
      setTimeout(function () {
        document.querySelectorAll(".heart").forEach((item) => {
          item.classList.add("animation");
        });
      }, 3500);
      setTimeout(function () {
        intervalContent = setInterval(function () {
          if (currentIndexLetter < charArrDateLetter.length) {
            text__letter.textContent += charArrDateLetter[currentIndexLetter];
            currentIndexLetter++;
          } else {
            clearInterval(intervalContent);
          }
        }, 50);
      }, 6000);
    });
    $(".close").on("click", function () {
      clearInterval(intervalContent);
      document.querySelector(".title__letter").textContent = "";
      text__letter.textContent = "";
      currentIndexLetter = 0;
      currentIndexTitle = 0;
      document.querySelector("#heart__letter").classList.remove("animationOp");
      document.querySelector(".love__img").classList.remove("animationOp");
      document.querySelector("#mewmew").classList.remove("animationOp");
      document.querySelectorAll(".heart").forEach((item) => {
        item.classList.remove("animation");
      });
      $(".box__letter").slideUp();
      $(".letter__border").slideUp();
    });
    let currentSlideIndex = 0;

  // Khi click vào mèo, mở slideshow
  document.getElementById("mewmew").addEventListener("click", function (event) {
    event.preventDefault();
    openSlideshow(); // Mở slideshow
  });

  // Hàm mở slideshow
  function openSlideshow() {
    document.getElementById("slideshow").style.display = "flex"; // Hiển thị slideshow
    showSlide(currentSlideIndex); // Hiển thị slide hiện tại
    // Gắn sự kiện cho nút đóng chỉ khi slideshow được mở
    document.querySelector(".close-slideshow").style.display = "block"; // Hiển thị nút đóng
    document.querySelector(".close-slideshow").addEventListener("click", function () {
      closeSlideshow(); // Đóng slideshow khi click
    });
  }

  // Hàm đóng slideshow
  function closeSlideshow() {
    document.getElementById("slideshow").style.display = "none"; // Ẩn slideshow
  }

  function showSlide(n) {
    const slides = document.getElementsByClassName("slide");
    if (n >= slides.length) {
      currentSlideIndex = 0;
    }
    if (n < 0) {
      currentSlideIndex = slides.length - 1;
    }
    for (let i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
    }
    slides[currentSlideIndex].style.display = "block";
  }
  document.querySelector(".prev").addEventListener("click", function () {
  changeSlide(-1);
});

document.querySelector(".next").addEventListener("click", function () {
  changeSlide(1);
});

function changeSlide(n) {
  currentSlideIndex += n;
  showSlide(currentSlideIndex);
}

    //mobile

    function mobile() {
      const app = {
        timeout: function (txt, dom) {
          let currentIndex = 0;
          let charArr = txt.split("");
          intervalMobile = setInterval(function () {
            if (currentIndex < charArr.length) {
              dom.textContent += charArr[currentIndex];
              currentIndex++;
            } else {
              clearInterval(intervalMobile);
            }
          }, 200);
        },
      };
      return app;
    }
    const fcMobile = mobile();
    if (window.innerWidth < 768) {
      setTimeout(() => {
        fcMobile.timeout("24", document.querySelector(".day"));
      }, 5000);
      setTimeout(() => {
        fcMobile.timeout("01", document.querySelector(".month"));
      }, 6000);
    }
  </script>
</html>
